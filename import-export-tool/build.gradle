buildscript {
  dependencies {
    classpath group: "com.liferay", name: "com.liferay.gradle.plugins.wsdl.builder", version: "2.0.3"
  }

  repositories {
    maven {
      url "https://repository-cdn.liferay.com/nexus/content/groups/public"
    }
  }
}

rootProject

allprojects {
  apply plugin: "java"
  apply plugin: "com.liferay.wsdl.builder"
  group 'com.dytech.edge.importexport'
  version '1.0-SNAPSHOT'
  sourceCompatibility = 1.8

  repositories {
    mavenCentral()
  }

  dependencies {
    compile group: 'com.google.guava', name: 'guava', version: '16.0.1'
    compile group: 'javax.xml', name: 'jaxrpc-api', version: '1.1'
    compile group: 'log4j', name: 'log4j', version: '1.2.17'
    compile group: 'org.slf4j', name: 'slf4j-api', version: '1.6.1'
    compile group: 'commons-codec', name: 'commons-codec', version: '1.7'
    compile group: 'commons-discovery', name: 'commons-discovery', version: '0.5'
    compile group: 'org.apache.axis', name: 'axis', version: '1.4'
    compile group: 'commons-logging', name: 'commons-logging', version: '1.1.1'
    //compile fileTree(include: ['*.jar'], dir: 'libs')
    compile fileTree(dir : '../Platform/Plugins/com.tle.platform.common/target/scala-2.12', include:['*.jar'])
    compile fileTree(dir : '../Source/Plugins/Platform/com.tle.platform.swing/target/scala-2.12', include:['*.jar'])
//    compile files('../Source/Plugins/Platform/com.tle.platform.swing/target/scala-2.12') {
//      builtBy "compileSbtPlatformSwing"
//    }
//    compile files('../Platform/Plugins/com.tle.platform.common/target/scala-2.12') {
//      builtBy "compileSbtPlatformCommon"
//    }
    compile group: 'net.sf.jpf', name: 'jpf', version: '1.5'
    compile group: 'org.slf4j', name: 'jcl-over-slf4j', version: '1.7.0'
    testCompile group: 'org.slf4j', name: 'slf4j-log4j12', version: '1.6.1'
    testCompile group: 'junit', name: 'junit', version: '4.12'
  }
}
task compileSbtProject(type: Exec) {
  //assembly is only available when called from sbt root project
  workingDir "../"
  commandLine "sbt","com_tle_platform_swing/assembly","com_tle_platform_common/assembly"
}
//project(":import") {
//  jar {
//
//  }
//}

sourceSets {
  main {
    java {
      srcDir 'build/codegen'
      srcDir 'src/main/java'
    }
  }
}

buildWSDL {
  destinationDir = file("build/codegen")
  generateOptions.mappings = ["http://soap.remoting.web.tle.com" : "com.tle.web.remoting.soap", "http://lang.java":"com.tle.web.remoting.exception"]
  buildLibs = false
  includeWSDLs = false
}

//task( myTask ) {
//  "sbt compile".execute()
//}
//
//compileJava.dependsOn()
