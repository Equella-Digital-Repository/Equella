<?xml version="1.0" encoding="UTF-8"?>

<project name="common" basedir=".">

	<dirname property="common.basedir" file="${ant.file.common}"/>
	<import file="${common.basedir}/../../common-ant.xml" />

	<property name="lib" location="lib" />
	<property name="resources" location="resources" />
	<property name="plugindocs" location="plugindocs" />

	<typedef resource="org/java/plugin/tools/ant/jpf-tasks.properties" classpathref="customtasks.classpath"/>

	<target name="clean" depends="common-ant.clean">
		<delete dir="${plugindocs}"/>
	</target>

	<target name="init" depends="common-ant.init">
		<property name="jarname" value="${plugin.id}-${version.mmr}-${version.commit}.jar"/>
	</target>

	<target name="define-build.classpath" depends="init,define-eclipseClasspath">
		<path id="build.classpath">
			<path refid="eclipse.classpath" />
		</path>
	</target>

	<target name="generate-source" depends="common-ant.generate-source" />

	<target name="compile" depends="common-ant.compile" />

	<target name="make" depends="common-ant.make" />

	<target name="jar" depends="test">
		<mkdir dir="${product}" />
		<jar destfile="${product}/${jarname}" basedir="${basedir}">
			<include name="classes/**/*"/>
			<include name="resources/**/*"/>
			<include name="lib/**/*"/>
			<include name="plugin-jpf.xml"/>
		</jar>
	</target>

	<target name="product" depends="jar" />

	<target name="doc">
		<delete dir="${plugindocs}" />
		<jpf-doc basedir="${basedir}" includes="plugin-jpf.xml" destdir="${plugindocs}" />
	</target>
</project>
